<!-- <html>
  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

  <body style="margin: 0px; overflow: hidden;">
    <a-scene embedded arjs>
        <a-marker type="pattern" url="./pattern-QRShadow.patt">
            <a-entity 
            position="0 0 0" 
            scale="1 1 1" 
            gltf-model="./kartrider_shadow_the_hedgehog.glb"
            animation="property: rotation; to: 0 360 0; loop: true; dur: 10000">
        </a-entity>
    </a-marker>
    <a-entity camera></a-entity>
</a-scene>
</body>
</html> -->
<!-- Substituímos o marcador Hiro pelo marcador personalizado -->
<!DOCTYPE html>
<html>
<head>
    <title>AR com Vídeo</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script>
        // Componente para eventos de marcador
        AFRAME.registerComponent('registerevents', {
            init: function() {
                var marker = this.el;

                // Configura eventos para marcador encontrado
                marker.setAttribute('emitevents', 'true');

                marker.addEventListener('markerFound', function() {
                    // Obtém o vídeo e torna visível
                    var vid = document.getElementById('video');
                    document.querySelector('#video-entity').setAttribute('visible', true);

                    // Reinicia e reproduz o vídeo
                    vid.currentTime = 0;
                    vid.play();

                    // Oculta o vídeo quando termina
                    vid.addEventListener('ended', function() {
                        document.querySelector('#video-entity').setAttribute('visible', false);
                    });
                });

                marker.addEventListener('markerLost', function() {
                    // Pausa o vídeo ao perder o marcador
                    var vid = document.getElementById('video');
                    vid.pause();
                });
            }
        });
    </script>
</head>
<body style="margin:0; overflow:hidden;">
    <a-scene embedded arjs="sourceType: webcam;">
        <!-- Pré-carregando o vídeo -->
        <a-assets>
            <video id="video" src="./Coringa (Joker) - Vídeo Motivacional Para Status whatsapp -.mp4" preload="auto" loop="false"></video>
        </a-assets>

        <!-- Marcador personalizado -->
        <a-marker type="pattern" url="./pattern-QRShadow.patt" registerevents>
            <!-- Entidade de vídeo -->
            <a-video 
                id="video-entity" 
                src="#video" 
                position="0 0 0" 
                scale="2 1 1" 
                rotation="-90 0 0" 
                visible="false">
            </a-video>
        </a-marker>

        <a-entity camera></a-entity>
    </a-scene>
</body>
</html>
